{% extends "_base.html" %}

{% block content %}
    <div class="dashboard-header">
        <h1>Welcome, {{ current_user.username }}</h1>
        <details>
            <summary class="btn btn-primary">Add New Employee</summary>
            <div class="form-container" style="margin-top: 20px;">
                <form method="POST" action="{{ url_for('main.add_employee') }}" enctype="multipart/form-data">
                    {{ form.hidden_tag() }}
                    <div class="form-group">
                        {{ form.name.label }}
                        {{ form.name(class="form-control") }}
                    </div>
                    <div class="form-group">
                        {{ form.employee_login.label }}
                        {{ form.employee_login(class="form-control") }}
                    </div>
                    <div class="form-group">
                        {{ form.email.label }}
                        {{ form.email(class="form-control") }}
                    </div>
                    <div class="form-group">
                        {{ form.photo.label }}
                        {{ form.photo(class="form-control") }}
                    </div>
                    {{ form.submit(class="btn btn-secondary") }}
                </form>
            </div>
        </details>
    </div>

    <h2>Your Employees</h2>
    <div class="employee-grid">
        {% if employees %}
            {% for employee in employees %}
                <div class="employee-card">
                    <img src="{{ url_for('static', filename='profile_pics/' + employee.photo_url) }}" alt="{{ employee.name }}'s photo" class="employee-photo">
                    <h3>{{ employee.name }}</h3>
                    <p>Login: {{ employee.employee_login }}</p>
                    <p>Email: {{ employee.email }}</p>
                    <a href="{{ url_for('main.employee_detail', employee_id=employee.id) }}" class="btn btn-secondary">More Details</a>

                    <form action="{{ url_for('main.delete_employee', employee_id=employee.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this employee?');" style="display: inline;">
                        <input type="submit" value="Delete" class="btn btn-danger">
                    </form>
                </div>
            {% endfor %}
        {% else %}
            <p>You have not added any employees yet.</p>
        {% endif %}
    </div>

{% endblock %}